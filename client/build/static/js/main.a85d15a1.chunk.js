(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{148:function(e,t,a){e.exports=a(254)},158:function(e,t,a){},254:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(35),l=a.n(c),i=a(5),o=a(39),s=a(118),u=a(137),m=a.n(u),d=a(138),p=a.n(d),f=a(60),b={isLoggedIn:!1,userProfile:null,userId:null,token:null,errorStatusCode:null},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(f.a)(Object(f.a)({},e),{},{isLoggedIn:!!t.payload.token,userProfile:t.payload.user,userId:t.payload.userId,token:t.payload.token});case"LOGOUT":return Object(f.a)(Object(f.a)({},e),{},{isLoggedIn:!1,userProfile:null,userId:null,token:null});case"ERR_STATUS_CODE":return Object(f.a)(Object(f.a)({},e),{},{errorStatusCode:t.payload});default:return e}},h={key:"root",storage:p.a},g=Object(s.a)(h,E),v=Object(o.d)(g,Object(o.a)(m.a)),w=Object(s.b)(v),O=a(139),j=(a(158),a(11)),y=a(10),N=(a(159),a(9)),k=a.n(N),x=a(22),S=a(6),C=function(e){return n.a.createElement("div",{className:"card white darken-1 hoverable collection"},n.a.createElement("div",{className:"card-content black-text collection-item avatar"},n.a.createElement("img",{src:"".concat("https://beenhere-v2.herokuapp.com","/").concat(e.image),alt:"",className:"circle"}),n.a.createElement("span",{className:"card-title"},e.username),n.a.createElement("p",{className:"card-places"},e.places.length," ",e.places.length<=1?"Place":"Places")))},F=function(e){return 0===e.items.length?n.a.createElement("div",null,n.a.createElement("h2",null,"No Users found.")):n.a.createElement("div",{className:"row"},e.items.map((function(e){return n.a.createElement("div",{className:"col s12 m6 l4 section",key:e._id},n.a.createElement(j.b,{to:"".concat(e._id,"/places")},n.a.createElement(C,e)))})))},L=function(){var e=Object(r.useState)(!1),t=Object(S.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(),l=Object(S.a)(c,2),o=l[0],s=l[1],u=Object(i.c)((function(e){return e})).errorStatusCode,m=Object(i.b)(),d=Object(r.useRef)([]),p=Object(r.useCallback)(function(){var e=Object(x.a)(k.a.mark((function e(t){var a,r,c,l,i,o,u,p=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>1&&void 0!==p[1]?p[1]:"GET",r=p.length>2&&void 0!==p[2]?p[2]:null,c=p.length>3&&void 0!==p[3]?p[3]:{},n(!0),l=new AbortController,d.current.push(l),e.prev=6,e.next=9,fetch(t,{method:a,body:r,headers:c,signal:l.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(o=e.sent,d.current=d.current.filter((function(e){return e!==l})),i.ok){e.next=18;break}throw(u=new Error(o.message)).status=o.code,u;case 18:return n(!1),e.abrupt("return",o);case 22:throw e.prev=22,e.t0=e.catch(6),m({type:"ERR_STATUS_CODE",payload:e.t0.status}),s(e.t0.message),n(!1),e.t0;case 28:case"end":return e.stop()}}),e,null,[[6,22]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){return function(){d.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:a,error:o,sendRequest:p,clearError:function(){403!==u&&401!==u||m({type:"LOGOUT"}),s(null)}}},I=a(140),q=a.n(I),A=a(77),P=a.n(A),D=a(106),T=function(e){var t={lat:+e.coords.lat,lng:+e.coords.lng};return n.a.createElement(D.b,{googleMapsApiKey:"AIzaSyAuD_TmRc0dwpOjca4-dt4NXHCA8O5b2Vw"},n.a.createElement(D.a,{mapContainerStyle:{width:"100%",height:"400px"},center:t,zoom:14},n.a.createElement(D.c,{position:t}),n.a.createElement(n.a.Fragment,null)))};P.a.setAppElement("#modal-root");var _=function(e){return n.a.createElement(P.a,{isOpen:e.isError,style:B,onRequestClose:e.errorHandler},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h3",null,"An error occurred:")),n.a.createElement("div",{className:"modal-content"},e.error),n.a.createElement("button",{className:"waves-effect waves-light btn-small deep-orange-text white right",onClick:e.errorHandler},"close"))},z=function(e){return n.a.createElement(P.a,{isOpen:e.showConfirm,onRequestClose:e.closeDeleteHandler,style:H,contentLabel:"Delete a place warning"},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h1",null,"Are you sure?")),n.a.createElement("div",{className:"modal-content"},"You are about to delete a place. Are you sure you want to that?"),n.a.createElement("div",{className:"row"}),n.a.createElement("div",{className:"modal-footer"},n.a.createElement("button",{className:"waves-effect waves-light btn-small deep-orange-text white",onClick:e.closeDeleteHandler},"Cancel"),n.a.createElement("button",{className:"waves-effect waves-light btn-small white-text deep-orange accent-4",onClick:e.confirmDeleteHandler},"Delete")))},M=function(e){return n.a.createElement(P.a,{isOpen:e.showMap,onRequestClose:e.closeMapHandler,style:U,contentLabel:e.title},n.a.createElement(T,{coords:e.location}),n.a.createElement("div",{className:"row"}),n.a.createElement("div",{className:"modal-footer"},e.address,n.a.createElement("button",{className:"waves-effect waves-light btn-small deep-orange-text white right",onClick:e.closeMapHandler},"close")))},R=function(e){return n.a.createElement(P.a,{isOpen:e.isLoading,style:V},n.a.createElement(q.a,{type:"BallTriangle",color:"#FFFFFF",height:200,width:200,timeout:0,visible:e.isLoading}))},B={overlay:{backgroundColor:"rgba(0,0,0,0.75)",zIndex:"999"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",backgroundColor:"red",color:"white",border:"none",transform:"translate(-50%,-50%)",zIndex:"1000"}},H={overlay:{backgroundColor:"rgba(0,0,0,0.75)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",width:"50%",marginRight:"-50%",transform:"translate(-50%, -50%)"}},U={overlay:{backgroundColor:"rgba(0,0,0,0.75)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",width:"90%",marginRight:"-50%",transform:"translate(-50%, -50%)"}},V={overlay:{backgroundColor:"rgba(0,0,0,0.75)",zIndex:"999"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",backgroundColor:"rgba(0,0,0,0)",border:"none",transform:"translate(-50%,-50%)",zIndex:"1000"}},G=function(){var e=Object(r.useState)(!1),t=Object(S.a)(e,2),a=t[0],c=t[1],l=Object(r.useState)(!1),i=Object(S.a)(l,2),o=i[0],s=i[1],u=L(),m=u.isLoading,d=u.error,p=u.sendRequest,f=u.clearError;Object(r.useEffect)((function(){(function(){var e=Object(x.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("".concat("https://beenhere-v2.herokuapp.com","/api/users/"));case 3:t=e.sent,c(t.users),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s(!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[p]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(R,{isLoading:m}),n.a.createElement(_,{isError:o,errorHandler:function(){f(),s(!1)},error:d}),n.a.createElement("div",{className:"container"},!m&&a&&n.a.createElement(F,{items:a})))},$=a(27),J=a(74),Z=a(145),W=function(e){var t=e.label,a=(e.setFieldValue,Object(J.a)(e,["label","setFieldValue"])),r=Object($.d)(a),c=Object(S.a)(r,2),l=c[0],i=c[1];switch(a.type){case"text":case"email":case"password":return n.a.createElement("div",{className:"input-field col s12"},n.a.createElement("input",Object.assign({},l,a)),n.a.createElement("label",{className:"white-text active",htmlFor:a._id||a.name},t),i.touched&&i.error?n.a.createElement("span",{className:"helper-text","data-error":i.error},i.error):null);default:return n.a.createElement("div",{className:"input-field col s12"},n.a.createElement(Z.a,Object.assign({className:"materialize-textarea"},l,a,{id:"text-area"})),n.a.createElement("label",{className:"white-text active",htmlFor:a._id||a.name},t),i.touched&&i.error?n.a.createElement("div",{className:"meta-error"},i.error):null)}},K=a(91),Q=a(267),X=a(264),Y=a(268),ee=a(143),te=a.n(ee),ae=function(e){return{hidden:{display:"none"},container:{margin:"auto",marginBottom:"30px"},title:{margin:"auto",display:"flex",justifyContent:"center",padding:e.spacing(2)},errorMsg:{margin:"auto",display:"flex",justifyContent:"center",padding:e.spacing(2)},bigAvatar:{margin:"auto",width:140,height:140,borderStyle:"solid",borderSize:"1px",cursor:"pointer"},avatarThumb:{width:"100%",height:"100%",objectFit:"cover"},primaryBack:{background:"#FFF"},whiteBack:{background:"white"},errorBack:{background:e.palette.error.main}}},re=a(3),ne=a.n(re),ce=te()(ae)((function(e){var t=Object(r.useRef)(),a=Object(r.useState)(),c=Object(S.a)(a,2),l=c[0],i=c[1],o=Object(r.useState)(),s=Object(S.a)(o,2),u=s[0],m=s[1],d=e.errorMessage,p=e.title,f=e.classes,b=e.field,E=b.name,h=b.onBlur,g=ne()(f.bigAvatar,l?[f.whiteBack]:[f.primaryBack],Object(K.a)({},f.errorBack,d));return n.a.createElement("div",{className:f.container},n.a.createElement("input",{className:f.hidden,id:E,name:E,type:"file",onChange:function(t){t.preventDefault();var a=new FileReader,r=t.target.files[0];r&&(a.onloadend=function(){i(r),m(a.result)},a.readAsDataURL(r),e.setFieldValue(e.field.name,r))},ref:t,accept:".jpg,.jpeg,.png,.gif",onBlur:h}),n.a.createElement(Q.a,{className:f.title,variant:"h5"},p),n.a.createElement(Y.a,{className:g,onClick:function(){t&&t.current.click()}},d?n.a.createElement(X.a,{style:{fontSize:36}},"error_outline"):l?n.a.createElement("img",{className:f.avatarThumb,src:u,alt:"..."}):n.a.createElement(X.a,{style:{fontSize:36,color:"#e65100"}},"image")),d?n.a.createElement(Q.a,{className:f.errorMsg,variant:"caption",color:"error"},d):null)})),le=a(13),ie=["image/jpg","image/jpeg","image/gif","image/png"],oe=le.b({title:le.d().min(3,"Must be at least 3 characters").required("A title is required"),description:le.d().required("A description is required"),address:le.d().required("An address is required"),file:le.a().required("Image is required").test("fileSize","File too large. Image upload size limit is 3MB.",(function(e){return e&&e.size<=3e6})).test("fileFormat","Unsupported Format",(function(e){return e&&ie.includes(e.type)}))}),se=le.b({email:le.d().email("Email is invalid").required("Email is required"),password:le.d().min(8,"Password has to be longer than 6 characters!").required("Please Enter your password").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/,"Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and one special case Character")}),ue=le.b({username:le.d().required("Username is required").min(3,"Must be at least 3 characters long"),email:le.d().email("Email is invalid").required("Email is required"),file:le.a().required("Avatar is required").test("fileSize","File too large. Image upload size limit is 3MB.",(function(e){return e&&e.size<=3e6})).test("fileFormat","Unsupported Format",(function(e){return e&&ie.includes(e.type)})),password:le.d().min(8,"Password has to be longer than 6 characters!").required("Please Enter your password").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/,"Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and one special case Character"),confirmPassword:le.d().oneOf([le.c("password"),null],"Passwords are not the same!").required("Password confirmation is required!")}),me=function(){var e=Object(r.useState)(!1),t=Object(S.a)(e,2),a=t[0],c=t[1],l=L(),o=l.isLoading,s=l.error,u=l.sendRequest,m=l.clearError,d=Object(i.c)((function(e){return e})),p=d.userId,f=d.token,b=Object(y.g)(),E=function(){var e=Object(x.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("title",t.title),a.append("description",t.description),a.append("address",t.address),a.append("creator",t.creator),a.append("image",t.file),e.prev=6,e.next=9,u("".concat("https://beenhere-v2.herokuapp.com","/api/places/"),"POST",a,{Authorization:"Bearer "+f});case 9:b.push("/".concat(p,"/places")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),c(!0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",null,n.a.createElement(R,{isLoading:o}),n.a.createElement(_,{isError:a,errorHandler:function(){m(),c(!1)},error:s}),n.a.createElement($.c,{initialValues:{title:"",description:"",address:"",creator:p,file:void 0},validationSchema:oe,onSubmit:function(e,t){var a=t.setSubmitting,r=t.resetForm,n=t.submitForm;r(),a(!1),n(),E(e)}},(function(e){var t=e.errors,a=e.touched,r=e.handleBlur,c=e.setFieldValue,l=e.isSubmitting;return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col s6 offset-s3"},n.a.createElement($.b,null,n.a.createElement("h1",null,"Create a Place"),n.a.createElement($.a,{name:"file",component:ce,title:"Select a file",setFieldValue:c,errorMessage:t.file?t.file:void 0,touched:a.file,style:{display:"flex"},onBlur:r}),n.a.createElement(W,{label:"Title",name:"title",type:"text"}),n.a.createElement(W,{label:"Description",name:"description",type:"textarea"}),n.a.createElement(W,{label:"Address",name:"address",type:"text"}),n.a.createElement("button",{className:"waves-effect waves-light btn white-text green darken-4",type:"submit",disabled:l},l?"Loading...":"Submit",n.a.createElement("i",{className:"material-icons right"},"send")))))})))},de=a(26),pe=function(e){var t=Object(i.c)((function(e){return e})),a=t.isLoggedIn,r=t.userId,c=t.userProfile,l=Object(i.b)();return n.a.createElement(n.a.Fragment,null,n.a.createElement("li",null,n.a.createElement(j.c,{to:"/",exact:!0},"Feed")),a&&n.a.createElement("li",null,n.a.createElement(j.c,{to:"/".concat(r,"/places")},"My Places")),a&&n.a.createElement("li",null,n.a.createElement(j.c,{to:"/places/new"},"Add a Place")),!a&&n.a.createElement("li",null,n.a.createElement(j.c,{to:"/auth"},"Auth")),a&&n.a.createElement("li",null,n.a.createElement(de.Dropdown,{id:"Dropdown_6",options:{alignment:"left",inDuration:150,outDuration:250,coverTrigger:!1},trigger:n.a.createElement(de.Chip,{close:!1,options:null},n.a.createElement("img",{alt:"Contact Person",className:"circle",src:"".concat("https://beenhere-v2.herokuapp.com","/").concat(c.image)}),c.username)},n.a.createElement(j.c,{to:"",onClick:function(){l({type:"LOGOUT"})}},"Logout"))))},fe=function(){var e=Object(i.c)((function(e){return e})),t=e.isLoggedIn,a=e.userId,r=Object(i.b)();return n.a.createElement(n.a.Fragment,null,n.a.createElement(de.SideNavItem,{user:{background:"https://images.pexels.com/photos/57416/cat-sweet-kitty-animals-57416.jpeg?auto=compress&cs=tinysrgb&dpr=3&h=750&w=1260",email:"tsuma@gmail.com",image:"https://images.unsplash.com/photo-1520315342629-6ea920342047?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1000&q=80",name:"Maki Zushi"},userView:!0}),n.a.createElement(de.SideNavItem,{href:"/"},"Feed"),t&&n.a.createElement(de.SideNavItem,{href:"/".concat(a,"/places")},"My Places"),t&&n.a.createElement(de.SideNavItem,{href:"/places/new"},"Add a Place"),n.a.createElement(de.SideNavItem,{divider:!0}),!t&&n.a.createElement(de.SideNavItem,{href:"/auth"},"Auth"),t&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row center"}),n.a.createElement("div",{className:"row center"},n.a.createElement(de.Button,{node:"button",style:{backgroundColor:"#bf360c",color:"#fff"},onClick:function(){r({type:"LOGOUT"})}},"Logout",n.a.createElement(de.Icon,{right:!0},"exit_to_app")))))},be=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("nav",{className:"navbar-fixed transparent",role:"navigation"},n.a.createElement("div",{className:"nav-wrapper container"},n.a.createElement(j.c,{to:"/",exact:!0},n.a.createElement("div",{id:"logo-container",className:"brand-logo"},n.a.createElement("img",{href:"/",src:"/beenherelogo.png",alt:""}))),n.a.createElement("ul",{className:"right hide-on-med-and-down"},n.a.createElement(pe,null)))),n.a.createElement(de.SideNav,{id:"SideNav-10",options:{draggable:!0},trigger:n.a.createElement("i",{id:"sidenavmenu-trigger",className:"material-icons icon-white"},"menu")},n.a.createElement(fe,null)))},Ee=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(be,null),n.a.createElement("div",{className:"row"}))},he=function(e){var t=Object(r.useState)(!1),a=Object(S.a)(t,2),c=a[0],l=a[1],o=L(),s=o.isLoading,u=o.error,m=o.sendRequest,d=o.clearError,p=Object(y.g)(),f=Object(r.useState)(!1),b=Object(S.a)(f,2),E=b[0],h=b[1],g=Object(r.useState)(!1),v=Object(S.a)(g,2),w=v[0],O=v[1],j=Object(i.c)((function(e){return e})),N=j.userId,C=j.token,F=Object(i.b)(),I=function(){return h(!0)},q=function(){var t=Object(x.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!1),t.prev=1,t.next=4,m("".concat("https://beenhere-v2.herokuapp.com","/api/places/").concat(e._id),"DELETE",null,{Authorization:"Bearer "+C});case 4:e.onDelete(e._id),F({type:"UPDATE_DELETED",payload:e._id}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),l(!0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,n.a.createElement(R,{isLoading:s}),n.a.createElement(_,{isError:c,errorHandler:function(){d(),l(!1)},error:u}),n.a.createElement(z,{showConfirm:w,closeDeleteHandler:function(){return O(!1)},confirmDeleteHandler:q}),n.a.createElement(M,{showMap:E,closeMapHandler:function(){return h(!1)},title:e.title,location:e.location,address:e.address}),n.a.createElement("div",{className:"col s6 offset-s3"},n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-image"},n.a.createElement("div",{className:"image-overlay"},n.a.createElement("img",{src:"".concat("https://beenhere-v2.herokuapp.com","/").concat(e.image),alt:e.title})),n.a.createElement("span",{className:"card-title"},e.title)),n.a.createElement("div",{className:"card-content"},n.a.createElement("p",null,e.description)),n.a.createElement("div",{className:"card-action"},n.a.createElement("div",null,n.a.createElement("i",{className:"material-icons clickable",onClick:I},"location_on"),n.a.createElement("span",{className:"card-address",onClick:I},e.address)),N===e.creator&&n.a.createElement("div",{className:"card-options"},n.a.createElement("i",{className:"material-icons clickable",onClick:function(){return t=e._id,void p.push("/places/".concat(t));var t}},"mode_edit"),n.a.createElement("i",{className:"material-icons clickable",onClick:function(){return O(!0)}},"delete"))))))},ge=function(e){var t=Object(y.h)().uid,a=Object(i.c)((function(e){return e})).userId;return 0===e.places.length?n.a.createElement("div",{className:"row center"},a===t?n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"No Places found. Maybe create one?"),n.a.createElement(j.c,{to:"/places/new"},n.a.createElement("div",{className:"btn-floating btn-large"},n.a.createElement("i",{className:"material-icons black"},"add")))):n.a.createElement("h4",null,"No Places found.")):n.a.createElement("div",{className:"row center"},e.places.map((function(t){return n.a.createElement(he,Object.assign({key:t._id},t,{onDelete:e.onDeletePlace}))})))},ve=function(){var e=Object(y.h)().uid,t=Object(r.useState)(),a=Object(S.a)(t,2),c=a[0],l=a[1],i=Object(r.useState)(!1),o=Object(S.a)(i,2),s=o[0],u=o[1],m=L(),d=m.isLoading,p=m.error,f=m.sendRequest,b=m.clearError;Object(r.useEffect)((function(){(function(){var t=Object(x.a)(k.a.mark((function t(){var a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("".concat("https://beenhere-v2.herokuapp.com","/api/places/user/").concat(e));case 3:a=t.sent,l(a.userWithPlaces.places),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),u(!0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[f,e]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(R,{isLoading:d}),n.a.createElement(_,{isError:s,errorHandler:function(){b(),u(!1)},error:p}),!d&&c&&n.a.createElement(ge,{places:c,onDeletePlace:function(e){l((function(t){return t.filter((function(t){return t._id!==e}))}))}}))},we=function(){var e=L(),t=e.isLoading,a=e.error,c=e.sendRequest,l=e.clearError,o=Object(r.useState)(),s=Object(S.a)(o,2),u=s[0],m=s[1],d=Object(r.useState)(!1),p=Object(S.a)(d,2),f=p[0],b=p[1],E=Object(y.h)().pid,h=Object(y.g)(),g=Object(i.c)((function(e){return e})),v=g.userId,w=g.token;Object(r.useEffect)((function(){(function(){var e=Object(x.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("".concat("https://beenhere-v2.herokuapp.com","/api/places/").concat(E));case 3:t=e.sent,m(t.place),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b(!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[c,E]);var O=function(){var e=Object(x.a)(k.a.mark((function e(t,a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,c("".concat("https://beenhere-v2.herokuapp.com","/api/places/").concat(E),"PATCH",JSON.stringify({title:a.title,description:a.description}),{"Content-Type":"application/json",Authorization:"Bearer "+w});case 4:h.push("/".concat(v,"/places")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),b(!0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}();if(!u&&!a)return n.a.createElement("div",{className:"row center"},n.a.createElement("h2",null,"Could not find place!"));var j=le.b({title:le.d().min(3,"Must be more than 3 characters").required("A title is require"),description:le.d().required("A description is required")});return n.a.createElement("div",null,n.a.createElement(R,{isLoading:t}),n.a.createElement(_,{isError:f,errorHandler:function(){l(),b(!1)},error:a}),!t&&u&&n.a.createElement($.c,{initialValues:u,validationSchema:j,onSubmit:function(e,t){var a=t.setSubmitting;(0,t.resetForm)(),a(!1)}},(function(e){return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col s6 offset-s3"},n.a.createElement($.b,{onSubmit:function(t){return O(t,e.values)}},n.a.createElement("h1",null,"Edit a Place"),n.a.createElement(W,{label:"Title",name:"title",type:"text"}),n.a.createElement(W,{label:"Description",name:"description",type:"textarea"}),n.a.createElement("button",{className:"waves-effect waves-light btn white-text green darken-4",type:"submit",disabled:!!e.isSubmitting},e.isSubmitting?"Loading...":"Submit",n.a.createElement("i",{className:"material-icons right"},"send")))))})))},Oe=function(){var e=Object(r.useState)(!0),t=Object(S.a)(e,2),a=t[0],c=t[1],l=Object(r.useState)(!1),o=Object(S.a)(l,2),s=o[0],u=o[1],m=L(),d=m.isLoading,p=m.error,f=m.sendRequest,b=m.clearError,E=Object(i.b)(),h=Object(y.g)(),g=function(){var e=Object(x.a)(k.a.mark((function e(t){var r,n,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=13;break}return e.prev=1,e.next=4,f("".concat("https://beenhere-v2.herokuapp.com","/api/users/login"),"POST",JSON.stringify({email:t.email,password:t.password}),{"Content-Type":"application/json"});case 4:r=e.sent,E({type:"LOGIN",payload:{user:r.user,userId:r.user._id,token:r.token}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),u(!0);case 11:e.next=29;break;case 13:return(n=new FormData).append("username",t.username),n.append("email",t.email),n.append("image",t.file),n.append("password",t.password),e.prev=18,e.next=21,f("".concat("https://beenhere-v2.herokuapp.com","/api/users/signup"),"POST",n);case 21:c=e.sent,h.push("/"),E({type:"LOGIN",payload:{user:c.user,userId:c.user._id,token:c.token}}),e.next=29;break;case 26:e.prev=26,e.t1=e.catch(18),u(!0);case 29:case"end":return e.stop()}}),e,null,[[1,8],[18,26]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,n.a.createElement(R,{isLoading:d}),n.a.createElement(_,{isError:s,errorHandler:function(){b(),u(!1)},error:p}),n.a.createElement($.c,{initialValues:{username:"",email:"",file:void 0,password:"",confirmPassword:""},validationSchema:a?se:ue,onSubmit:function(e,t){var a=t.setSubmitting,r=t.resetForm,n=t.submitForm;a(!1),r(),n(),g(e)}},(function(e){e.values;var t=e.errors,r=e.touched,l=(e.handleSubmit,e.handleChange,e.handleBlur),i=e.setFieldValue,o=e.isSubmitting,s=e.resetForm;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col s6 offset-s3"},n.a.createElement($.b,null,n.a.createElement("h1",null,a?"Sign In":"Sign Up"),!a&&n.a.createElement($.a,{name:"file",component:ce,title:"Select a file",setFieldValue:i,errorMessage:t.file?t.file:void 0,touched:r.file,style:{display:"flex"},onBlur:l}),!a&&n.a.createElement(W,{label:"Username",name:"username",type:"text"}),n.a.createElement(W,{label:"Email",name:"email",type:"email"}),n.a.createElement(W,{label:"Password",name:"password",type:"password"}),!a&&n.a.createElement(W,{label:"Confirm Password",name:"confirmPassword",type:"password"}),n.a.createElement("button",{className:"waves-effect waves-light btn white-text green darken-4",type:"submit",disabled:o},o?"Loading...":"Submit",n.a.createElement("i",{className:"material-icons right"},"send"))))),n.a.createElement("div",{className:"divider row"}),n.a.createElement("div",{className:"col s6 offset-s3 center white-text"},a?"Don't have an account yet? ":"Already have an account? ",n.a.createElement("button",{className:"waves-effect waves-light btn-small deep-orange-text white accent-2 center",type:"reset",onClick:function(){c((function(e){return!e})),s()}},"Switch to ",a?"Sign Up":"Sign In")))})))},je=function(e){var t=e.component,a=Object(J.a)(e,["component"]),r=Object(i.c)((function(e){return e})).isLoggedIn;return n.a.createElement(y.b,Object.assign({},a,{render:function(e){return r?n.a.createElement(t,e):n.a.createElement(y.a,{to:"/"})}}))},ye=function(e){var t=e.component,a=e.restricted,r=Object(J.a)(e,["component","restricted"]),c=Object(i.c)((function(e){return e})).isLoggedIn;return n.a.createElement(y.b,Object.assign({},r,{render:function(e){return c&&a?n.a.createElement(y.a,{to:"/"}):n.a.createElement(t,e)}}))},Ne=function(){return n.a.createElement(j.a,null,n.a.createElement(Ee,null),n.a.createElement(y.d,null,n.a.createElement(ye,{restricted:!1,path:"/",exact:!0,component:G}),n.a.createElement(ye,{restricted:!1,path:"/:uid/places",component:ve}),n.a.createElement(je,{path:"/places/new",exact:!0,component:me}),n.a.createElement(je,{path:"/places/:pid",component:we}),n.a.createElement(ye,{restricted:!0,path:"/auth",component:Oe}),n.a.createElement(y.a,{to:"/"})))};l.a.render(n.a.createElement(i.a,{store:v},n.a.createElement(O.a,{persistor:w},n.a.createElement(Ne,null))),document.getElementById("root"))}},[[148,1,2]]]);
//# sourceMappingURL=main.a85d15a1.chunk.js.map